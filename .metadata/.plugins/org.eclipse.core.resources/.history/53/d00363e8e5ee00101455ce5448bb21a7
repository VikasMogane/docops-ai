package com.docops.document.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.Authentication;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.docops.document.entity.Document;
import com.docops.document.security.JwtPrincipal;
import com.docops.document.service.DocumentService;

import lombok.RequiredArgsConstructor;

@RestController
@RequestMapping("/documents")
@RequiredArgsConstructor
public class DocumentController {

@Autowired
private final DocumentService service;


@PostMapping("/upload")
public Document upload(@RequestParam String fileName,
@RequestParam String contentType,
Authentication auth) {


JwtPrincipal p = (JwtPrincipal) auth.getPrincipal();


return service.create(
p.orgId(),
p.userId(),
fileName,
contentType
);
}
}